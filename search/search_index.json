{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"CASTEP/Installation/","title":"Installation","text":""},{"location":"CASTEP/Installation/#castep-2512-aocl-ubuntu-2404-ryzen-3900x-guia-final","title":"CASTEP 25.12 + AOCL (Ubuntu 24.04, Ryzen 3900X) \u2014 Guia Final","text":""},{"location":"CASTEP/Installation/#0-pre-requisitos","title":"0) Pr\u00e9-requisitos","text":"<p><pre><code>sudo apt update\nsudo apt install -y build-essential gfortran cmake git \\\n    libopenmpi-dev openmpi-bin \\\n    libfftw3-dev python3 python3-pip gawk\n</code></pre> Confirme MPI <pre><code>which mpif90\nwhich mpirun\n# Esperado:\n# /usr/bin/mpif90\n# /usr/bin/mpirun\n</code></pre></p>"},{"location":"CASTEP/Installation/#1-definir-aocl-e-diretorios-de-biblioteca","title":"1) Definir AOCL e diret\u00f3rios de biblioteca","text":"<p>Voc\u00ea instalou o AOCL em: /opt/AMD/aocl/aocl-linux-gcc-5.1.0</p> <p>Defina vari\u00e1veis e caminho das libs (LP64):</p> <pre><code>export AOCL=/opt/AMD/aocl/aocl-linux-gcc-5.1.0\nexport LIBDIR=$AOCL/gcc/lib_LP64\nexport LD_LIBRARY_PATH=$LIBDIR:$LD_LIBRARY_PATH\n</code></pre>"},{"location":"CASTEP/Installation/#2-ajustar-symlinks-das-libs-aocl-uma-vez-so","title":"2) Ajustar symlinks das libs AOCL (uma vez s\u00f3)","text":"<p>O CASTEP procura libblis.so e libflame.so. No AOCL encontramos:</p> <p><pre><code>/opt/AMD/aocl/aocl-linux-gcc-5.1.0/gcc/lib_LP64/libblis.so.5.1.0\n/opt/AMD/aocl/aocl-linux-gcc-5.1.0/gcc/lib_LP64/libflame.so\n</code></pre> Crie os symlinks (no mesmo diret\u00f3rio): <pre><code>cd /opt/AMD/aocl/aocl-linux-gcc-5.1.0/gcc/lib_LP64\nsudo ln -s libblis.so.5.1.0 libblis.so\nsudo ln -s libblis-mt.so.5.1.0 libblis-mt.so\n# libflame.so j\u00e1 tem o nome esperado\n</code></pre></p>"},{"location":"CASTEP/Installation/#3-descompactar-o-castep","title":"3) Descompactar o CASTEP","text":"<pre><code>tar -zxf CASTEP-25.12.tar.gz\ncd CASTEP-25.12\n</code></pre>"},{"location":"CASTEP/Installation/#4-compilar-serial-e-mpi-com-aocl-fftw3","title":"4) Compilar (serial e MPI) com AOCL + FFTW3","text":"<p>4.1 Serial (opcional, \u00fatil para utilit\u00e1rios)</p> <p><pre><code>make clean\nmake -j$(nproc) COMMS_ARCH=serial \\\n     MATHLIBS=aocl MATHLIBDIR=\"$LIBDIR\" \\\n     FFT=fftw3  FFTLIBDIR=\"$LIBDIR\" \\\n     BUILD=fast TARGETCPU=host\nmake COMMS_ARCH=serial install\n</code></pre> Instala em: <pre><code>bin/linux_x86_64_gfortran10--serial/\n</code></pre> 4.2 MPI (principal) <pre><code>make clean\nmake -j$(nproc) COMMS_ARCH=mpi \\\n     MATHLIBS=aocl MATHLIBDIR=\"$LIBDIR\" \\\n     FFT=fftw3  FFTLIBDIR=\"$LIBDIR\" \\\n     BUILD=fast TARGETCPU=host\nmake COMMS_ARCH=mpi install\n</code></pre></p> <p>Instala em: <pre><code>bin/linux_x86_64_gfortran10--mpi/\n</code></pre></p>"},{"location":"CASTEP/Installation/#5-verificar-linkedicao-com-aocl","title":"5) Verificar linkedi\u00e7\u00e3o com AOCL","text":"<pre><code>ldd obj/linux_x86_64_gfortran*/castep.mpi | grep -E \"blis|flame\"\n# Esperado (caminhos AOCL):\n# libflame.so =&gt; /opt/AMD/aocl/aocl-linux-gcc-5.1.0/gcc/lib_LP64/libflame.so\n# libblis.so.5 =&gt; /opt/AMD/aocl/aocl-linux-gcc-5.1.0/gcc/lib_LP64/libblis.so.5\n# libblis-mt.so.5 =&gt; /opt/AMD/aocl/aocl-linux-gcc-5.1.0/gcc/lib_LP64/libblis-mt.so.5\n</code></pre>"},{"location":"CASTEP/Installation/#6-teste-rapido-mpi","title":"6) Teste r\u00e1pido (MPI)","text":"<p>Com arquivos si.cell/si.param prontos, rode: <pre><code>mpirun -np 4 ~/CASTEP/CASTEP-25.12/bin/linux_x86_64_gfortran10--mpi/castep.mpi si\n</code></pre></p> <p>(Ajuste -np conforme desejar.)</p>"},{"location":"CASTEP/Installation/#7-persistir-ambiente-no-bashrc","title":"7) Persistir ambiente no ~/.bashrc","text":"<p>Abra o arquivo:</p> <p><pre><code>nano ~/.bashrc\n</code></pre> Adicione ao final (usando os mesmos nomes de vari\u00e1veis/comandos que usamos acima): <pre><code># === AOCL libraries ===\nexport AOCL=/opt/AMD/aocl/aocl-linux-gcc-5.1.0\nexport LD_LIBRARY_PATH=$AOCL/gcc/lib_LP64:$LD_LIBRARY_PATH\n\n# === CASTEP binaries (MPI) ===\nexport PATH=$HOME/CASTEP/CASTEP-25.12/bin/linux_x86_64_gfortran10--mpi:$PATH\n</code></pre> Salve e recarregue: <pre><code>source ~/.bashrc\n</code></pre></p>"},{"location":"CASTEP/Installation/#8-wrapper-para-simplificar-mpirun-np-castepmpi","title":"8) Wrapper para simplificar mpirun -np ... castep.mpi","text":"<p>Crie /usr/local/bin/castep-mpi:</p> <pre><code>sudo bash -lc 'cat &gt; /usr/local/bin/castep-mpi &lt;&lt; \"EOF\"\n#!/bin/bash\n# Uso: castep-mpi &lt;nprocs&gt; &lt;seed&gt; [args...]\nNPROCS=\"$1\"\nSEED=\"$2\"\nshift 2\nmpirun -np \"$NPROCS\" $HOME/CASTEP/CASTEP-25.12/bin/linux_x86_64_gfortran10--mpi/castep.mpi \"$SEED\" \"$@\"\nEOF\nchmod +x /usr/local/bin/castep-mpi'\n</code></pre> <p>Agora voc\u00ea pode rodar assim: <pre><code>castep-mpi 4 si\n</code></pre></p>"},{"location":"CASTEP/Installation/#9-duvidas-comuns-troubleshooting","title":"9) D\u00favidas comuns / Troubleshooting","text":"<p>MPI_ABORT ... errorcode 1 logo no in\u00edcio Quase sempre \u00e9 falta de pseudopotencial. Use OTFG no .cell: <pre><code>%BLOCK SPECIES_POT\nSi  OTFG  [Si] 3|2.0|2.0|2.0:2|6.0|8.0|10.0\n%ENDBLOCK SPECIES_POT\n</code></pre> ou defina PSPOT_DIR para .usp.</p> <p>cannot find -lflame / -lblis Garanta:</p> <pre><code>export LIBDIR=$AOCL/gcc/lib_LP64\n\nexport LD_LIBRARY_PATH=$LIBDIR:$LD_LIBRARY_PATH\n</code></pre> <p>symlinks criados (passo 2).</p> <p>Utilit\u00e1rios reclamando diret\u00f3rio --serial ausente no make install \u00c9 normal se voc\u00ea instalou s\u00f3 MPI. Para instalar utilit\u00e1rios, tamb\u00e9m rode o build/instala\u00e7\u00e3o serial:</p> <p><pre><code>make COMMS_ARCH=serial BUILD=fast TARGETCPU=host\nmake COMMS_ARCH=serial install\n</code></pre> Quantos processos usar? Sua CPU tem 12 cores f\u00edsicos / 24 threads. Comece testando:</p> <p>castep-mpi 12 si (1 MPI por core f\u00edsico)</p> <p>compare com castep-mpi 24 si (1 MPI por thread)</p> <p>e com castep-mpi 4 si (teste leve)</p>"},{"location":"CASTEP/Installation/#10-exemplo-final-de-execucao","title":"10) Exemplo final de execu\u00e7\u00e3o","text":"<pre><code># com wrapper e 12 processos (recomenda\u00e7\u00e3o inicial)\ncastep-mpi 12 si\n</code></pre>"}]}